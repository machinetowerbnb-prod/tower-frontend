<div class="layout-container" fxLayout="column" fxFlexFill>
  <!-- ðŸ”¹ Header -->
  <header>
    <app-top-nav></app-top-nav>
  </header>

  <!-- ðŸ”¹ Main Container -->
  <div class="change-container">
    <!-- Blue Banner (same as Signin BG) -->
    <div class="banner-section">
      <h2>Change Password</h2>
      <p>Create a new password. Ensure it differs from previous ones for security.</p>
    </div>

    <!-- ðŸ”¹ Main Card -->
    <div class="main-content">
      <div class="password-card">
        <div class="hero-icon">
          <img src="/golden_coin.svg" alt="Golden Coin" />
        </div>
        <h2 class="form-heading">Update Password</h2>

        <!-- Form -->
        <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
          <!-- New Password -->
          <div class="password-section">
            <div class="section-labels">
              <span
                [class.error-label]="
                  passwordForm.get('newPassword')?.invalid &&
                  (passwordForm.get('newPassword')?.touched || passwordForm.get('newPassword')?.dirty)
                "
              >
                New Password
              </span>
            </div>

            <mat-form-field class="password-field" appearance="outline">
              <input
                matInput
                [type]="hideNewPassword ? 'password' : 'text'"
                formControlName="newPassword"
                placeholder="Enter new password"
              />
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="toggleNewPassword()"
              >
                <img src="/password-eye.svg" alt="eye" />
              </button>
              <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('required')">
                Password is required
              </mat-error>
              <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('minlength')">
                Minimum 8 characters required
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Confirm Password -->
          <div class="password-section">
            <div class="section-labels">
              <span
                [class.error-label]="
                  passwordForm.get('confirmPassword')?.invalid ||
                  passwordForm.errors?.['mismatch']
                "
              >
                Confirm Password
              </span>
            </div>

            <mat-form-field class="password-field" appearance="outline">
              <input
                matInput
                [type]="hideConfirmPassword ? 'password' : 'text'"
                formControlName="confirmPassword"
                placeholder="Re-enter password"
              />
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="toggleConfirmPassword()"
              >
                <img src="/password-eye.svg" alt="eye" />
              </button>
              <mat-error *ngIf="passwordForm.get('confirmPassword')?.hasError('required')">
                Confirm password is required
              </mat-error>
              <mat-error *ngIf="passwordForm.errors?.['mismatch']">
                Passwords do not match
              </mat-error>
            </mat-form-field>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ðŸ”¹ Footer with Button -->
  <footer class="footer">
    <button
      mat-raised-button
      type="submit"
      class="login-button"
      [disabled]="passwordForm.invalid"
      (click)="onSubmit()"
    >
      Update Password
    </button>
  </footer>
</div>